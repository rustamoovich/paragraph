# Быстрый старт Telegram бота

## 1. Установка зависимостей

```bash
pip install -r requirements.txt
```

## 2. Настройка

Создайте файл `.env` в корне проекта:

```env
TELEGRAM_BOT_TOKEN=ваш_токен_от_BotFather
SECRET_KEY=ваш_secret_key
DEBUG=True
```

## 3. Запуск бота

```bash
python manage.py run_bot
```

## 4. Тестирование

1. Найдите вашего бота в Telegram
2. Отправьте `/start`
3. Поделитесь контактом
4. Отправьте `/login` для получения кода

## Команды бота

- `/start` - Начать работу (запрос контакта)
- `/login` - Получить код входа
- `/help` - Справка
- `/admin_create_user <номер> [username] [имя] [фамилия]` - Создать пользователя (только для админов)
- `/admin_list_users` - Показать список пользователей (только для админов)

## Автоматическое создание пользователей

Теперь бот автоматически создает пользователей, если их нет в системе при отправке контакта.

## Копирование кода

Код входа отображается в моноширинном шрифте и легко копируется при клике в Telegram.

## Структура

- `apps/telegram_bot/bot_manager.py` - Основная логика бота
- `apps/telegram_bot/management/commands/run_bot.py` - Django команда
- Использует polling (без webhooks)
- Интегрирован с существующей системой OTP
